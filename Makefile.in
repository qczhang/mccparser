#                            -*- Mode: Makefile -*-
# Makefile.in
# Copyright © 2000-03 Laboratoire de Biologie Informatique et Théorique.
# Author           : Martin Larose
# Created On       : Mon Aug 21 15:57:45 2000
# $Revision$
# $Id$


PACKAGE = @PACKAGE@
PACKAGE_TARNAME = @PACKAGE_TARNAME@
VERSION = @VERSION@

srcdir = @srcdir@
VPATH = @srcdir@

@SET_MAKE@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
datadir = @datadir@
includedir = @includedir@
libdir = @libdir@

INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@

SUBDIRS = lib docs

RELEASESUBDIRS = $(SUBDIRS)

DISTFILES = ChangeLog INSTALL Makefile.in NEWS README config.guess \
config.h.in mccparser-config.in config.sub configure.in configure install-sh mkinstalldirs \
stamp-h.in

SCRIPTS = mccparser-config

.SUFFIXES:
.PHONY: doc


all static doc: $(SCRIPTS)
	@ for subdir in $(SUBDIRS); do \
	   echo "Building $@ in $$subdir"; \
	   (cd $$subdir && $(MAKE) $@) || exit 1; \
	  done

install install-static install-doc:
	@ for subdir in $(SUBDIRS); do \
	   echo "Building $@ in $$subdir"; \
	   (cd $$subdir && $(MAKE) $@) || exit 1; \
	  done
	@ echo Installing mccparser-config in $(bindir)
	@ $(srcdir)/mkinstalldirs $(bindir)
	@ $(INSTALL_PROGRAM) mccparser-config $(bindir)/mccparser-config
	@ $(srcdir)/mkinstalldirs $(datadir)/$(PACKAGE)/$(VERSION)/doc
	@ for file in ChangeLog NEWS README; do \
           $(INSTALL_DATA) $(srcdir)/$$file $(datadir)/$(PACKAGE)/$(VERSION)/doc; \
	  done

uninstall:
	@ for file in ChangeLog NEWS README; do \
           $(RM) $(datadir)/$(PACKAGE)/$(VERSION)/doc/$$file; \
	  done
	@ for subdir in $(SUBDIRS); do \
	   echo Making $@ in $$subdir; \
	   (cd $$subdir && $(MAKE) $@) || exit 1; \
	  done
	@ $(RM) $(bindir)/mccparser-config
	@- rmdir -p $(datadir)/$(PACKAGE)/$(VERSION)/doc


mostlyclean: mostlyclean-recursive mostlyclean-local

mostlyclean-local:

clean: clean-recursive clean-local

clean-local: mostlyclean-local

distclean: distclean-recursive distclean-local

distclean-local: clean-local
	@ $(RM) Makefile config.cache config.h config.log config.status mccparser-config

topclean: topclean-recursive topclean-local

topclean-local: distclean-local

mostlyclean-recursive clean-recursive distclean-recursive topclean-recursive:
	@ for subdir in $(SUBDIRS); do \
	   target=`echo $@ | sed 's/-recursive//'`; \
	   echo Making $$target in $$subdir; \
	   (cd $$subdir && $(MAKE) $$target) || exit 1; \
	  done

release:
	@ rm -fr $(PACKAGE)-$(VERSION)
	@ $(RM) $(PACKAGE)-$(VERSION).tar.gz
	@ mkdir $(PACKAGE)-$(VERSION)
	@ chmod 777 $(PACKAGE)-$(VERSION)
	@ for file in INSTALL NEWS README; do \
	   ln -s ../$(srcdir)/$$file $(PACKAGE)-$(VERSION)/$$file; \
	  done
	@ for subdir in $(RELEASESUBDIRS); do \
	   mkdir $(PACKAGE)-$(VERSION)/$$subdir; \
	   chmod 777 $(PACKAGE)-$(VERSION)/$$subdir; \
	  done
	@ for subdir in $(SUBDIRS); do \
	   (cd $$subdir && $(MAKE) $@) || exit 1; \
	  done
	@ chmod -R a+r $(PACKAGE)-$(VERSION)
	@ tar chof $(PACKAGE)-$(VERSION).tar $(PACKAGE)-$(VERSION)
	@ gzip -9 $(PACKAGE)-$(VERSION).tar
	@ rm -fr $(PACKAGE)-$(VERSION)

dist:
	@ rm -fr $(PACKAGE_TARNAME)-$(VERSION)
	@ mkdir $(PACKAGE_TARNAME)-$(VERSION)
	@ chmod 777 $(PACKAGE_TARNAME)-$(VERSION)
	@ echo Copying distribution files
	@ for file in $(DISTFILES); do \
	   ln $(srcdir)/$$file $(PACKAGE_TARNAME)-$(VERSION) 2> /dev/null \
	     || cp -p $(srcdir)/$$file $(PACKAGE_TARNAME)-$(VERSION); \
	  done
	@ for subdir in $(SUBDIRS); do \
	   echo Making $@ in $$subdir; \
	   mkdir $(PACKAGE_TARNAME)-$(VERSION)/$$subdir; \
	   chmod 777 $(PACKAGE_TARNAME)-$(VERSION)/$$subdir; \
	   (cd $$subdir && $(MAKE) $@) || exit 1; \
	  done
	@ chmod -R a+r $(PACKAGE_TARNAME)-$(VERSION)
	@ tar chof $(PACKAGE_TARNAME)-$(VERSION).tar $(PACKAGE_TARNAME)-$(VERSION)
	@ gzip -9f $(PACKAGE_TARNAME)-$(VERSION).tar
	@ rm -fr $(PACKAGE_TARNAME)-$(VERSION)

$(srcdir)/configure: $(srcdir)/configure.in
	@ cd $(srcdir) && autoconf

$(srcdir)/config.h.in: $(srcdir)/stamp-h.in

$(srcdir)/stamp-h.in: $(srcdir)/configure.in
	@ echo timestamp > $@

config.h: stamp-h

stamp-h: $(srcdir)/config.h.in config.status
	@ CONFIG_FILES= CONFIG_HEADERS=config.h ./config.status
	@ echo timestamp > $@

Makefile: $(srcdir)/Makefile.in config.status stamp-h
	@ ./config.status $@

config.status: $(srcdir)/configure
	@ ./config.status --recheck

mccparser-config: $(srcdir)/mccparser-config.in
	@ ./config.status $@

# Tell versions [3.59,3.63) of GNU make not to export all variables.
# Otherwise a system limit (for SysV at least) may be exceeded.
.NOEXPORT:
